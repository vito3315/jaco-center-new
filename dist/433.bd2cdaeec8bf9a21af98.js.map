{"version":3,"file":"433.bd2cdaeec8bf9a21af98.js","mappings":"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","sources":["webpack://react-ssr/./src/components/auth/auth.component.jsx"],"sourcesContent":["import React from 'react';\n\nimport Grid from '@mui/material/Grid';\nimport Button from '@mui/material/Button';\n\nconst queryString = require('query-string');\n\nimport itemsStore from '../../stores/items-store';\nimport config from '../../stores/config';\n\nimport { MyTextInput } from '../../stores/elements';\n\nexport class Auth extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {    \n      number: '',\n      pass: ''\n    };\n  }\n    \n  componentDidMount = () => {\n    document.title = \"Авторизация\";\n    itemsStore.setPage('auth');\n\n    if((window.location.protocol == 'http:' || window.location.protocol == 'http') && window.location.hostname != 'localhost'){\n      window.location.href = 'https://jacocallcenter.ru'+window.location.pathname;\n    }\n  }\n    \n  getData = (method, data = {}) => {\n    \n    this.setState({\n      spiner: true\n    })\n    \n    data.type = method;\n    data.token = itemsStore.getToken();\n\n    return fetch(config.urlApi, {\n      method: 'POST',\n      headers: {\n        'Content-Type':'application/x-www-form-urlencoded'},\n      body: queryString.stringify( data ) \n    }).then(res => res.json()).then(json => {\n      \n      if( json.st === false && json.type == 'redir' ){\n        window.location.pathname = '/';\n        return;\n      }\n      \n      if( json.st === false && json.type == 'auth' ){\n        window.location.pathname = '/auth';\n        return;\n      }\n      \n      setTimeout( () => {\n        this.setState({\n          spiner: false\n        })\n      }, 300 )\n      \n      return json;\n    })\n    .catch(err => { \n      console.log( err )\n      this.setState({\n        spiner: false\n      })\n    });\n  }\n\n  async login(){\n    let data = {\n      number: this.state.number,\n      pass: this.state.pass\n    }\n\n    let res = await this.getData('login_center', data);\n\n    if( res['st'] ){\n      itemsStore.setToken(res.token, res.name);\n     \n      setTimeout( () => {\n        window.location.href = '/';\n      }, 500 )\n      \n    }else{\n      alert(res.text)\n    }\n\n    /*fetch(config.urlApi, {\n      method: 'POST',\n      headers: {\n        'Content-Type':'application/x-www-form-urlencoded'},\n      body: queryString.stringify({\n        type: 'login_center', \n        number: this.state.number,\n        pass: this.state.pass\n      })\n    }).then(res => res.json()).then(json => {\n      if( json['st'] ){\n        itemsStore.setToken(json.token, json.name);\n       \n        setTimeout( () => {\n          window.location.href = '/';\n        }, 500 )\n        \n      }else{\n        alert(json.text)\n      }\n    });*/\n  }\n  \n  handleKeyPress(target) {\n    if(target.charCode==13){\n      if( this.state.number.length > 0 && this.state.pass.length > 0 ){\n        this.login();\n      }\n    }\n  }\n  \n  render() {\n    return (\n      <Grid container spacing={3} justifyContent=\"center\">\n        <Grid item xs={12} sm={4}>\n          <Grid container direction=\"column\" spacing={2}>\n          \n            <Grid item xs={12} sm={4}>\n              <img alt=\"Жако доставка роллов и пиццы\" src=\"../assets/logo.png\" style={{ height: 'max-content', width: '100%' }} />\n            </Grid>\n                \n            <Grid item xs={12} sm={4}>\n              <MyTextInput label={'Номер телефона'} value={this.state.number} func={ (event) => { this.setState({ number: event.target.value }) } } />\n            </Grid>\n            <Grid item xs={12} sm={4}>\n              <MyTextInput label={'Пароль'} type={'password'} value={this.state.pass} func={ (event) => { this.setState({ pass: event.target.value }) } } />\n            </Grid>\n\n            <Grid item xs={12} sm={4}>\n              <Button variant=\"contained\" style={{ width: '100%' }} onClick={this.login.bind(this)}>Войти</Button>\n            </Grid>\n\n          </Grid>\n        </Grid>\n        \n\n      </Grid>\n    )\n  }\n}"],"names":["queryString","require","Auth","_React$Component","_inherits","_login","_super","props","_this","_classCallCheck","call","_defineProperty","_assertThisInitialized","document","title","itemsStore","window","location","protocol","hostname","href","pathname","method","data","arguments","length","undefined","setState","spiner","type","token","fetch","config","headers","body","stringify","then","res","json","st","setTimeout","err","console","log","state","number","pass","_createClass","key","value","_asyncToGenerator","_regeneratorRuntime","_callee","_context","prev","next","this","getData","sent","name","alert","text","stop","apply","target","charCode","login","_this2","React","Grid","container","spacing","justifyContent","item","xs","sm","direction","alt","src","style","height","width","MyTextInput","label","func","event","Button","variant","onClick","bind"],"sourceRoot":""}