"use strict";(self.webpackChunkreact_ssr=self.webpackChunkreact_ssr||[]).push([[591],{5591:(t,e,n)=>{n.r(e),n.d(e,{default:()=>k});var a=n(467),o=n(3029),s=n(2901),r=n(6822),i=n(3954),c=n(5501),l=n(4467),u=n(4756),h=n.n(u),m=n(6540),p=n(8239),f=n(1224),d=n(3259),w=n(9060),y=n.n(w),g=n(5041);function A(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(A=function(){return!!t})()}var v=n(6663),k=function(t){function e(t){var n,a,s,c;return(0,o.A)(this,e),a=this,s=e,c=[t],s=(0,i.A)(s),n=(0,r.A)(a,A()?Reflect.construct(s,c||[],(0,i.A)(a).constructor):s.apply(a,c)),(0,l.A)(n,"componentDidMount",(function(){document.title="Авторизация",d.A.setPage("auth"),"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(window.location.href="https://jacocallcenter.ru"+window.location.pathname)})),(0,l.A)(n,"getData",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.setState({spiner:!0}),e.type=t,e.token=d.A.getToken(),fetch(y().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:v.stringify(e)}).then((function(t){return t.json()})).then((function(t){if(!1!==t.st||"redir"!=t.type){if(!1!==t.st||"auth"!=t.type)return setTimeout((function(){n.setState({spiner:!1})}),300),t;window.location.pathname="/auth"}else window.location.pathname="/"})).catch((function(t){console.log(t),n.setState({spiner:!1})}))})),n.state={number:"",pass:""},n}return(0,c.A)(e,t),(0,s.A)(e,[{key:"login",value:(n=(0,a.A)(h().mark((function t(){var e,n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={number:this.state.number,pass:this.state.pass},t.next=3,this.getData("login_center",e);case 3:(n=t.sent).st?(d.A.setToken(n.token,n.name),setTimeout((function(){window.location.href="/"}),500)):alert(n.text);case 5:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"handleKeyPress",value:function(t){13==t.charCode&&this.state.number.length>0&&this.state.pass.length>0&&this.login()}},{key:"render",value:function(){var t=this;return m.createElement(p.Ay,{container:!0,spacing:3,justifyContent:"center"},m.createElement(p.Ay,{item:!0,xs:12,sm:4},m.createElement(p.Ay,{container:!0,direction:"column",spacing:2},m.createElement(p.Ay,{item:!0,xs:12,sm:4},m.createElement("img",{alt:"Жако доставка роллов и пиццы",src:"../assets/logo.png",style:{height:"max-content",width:"100%"}})),m.createElement(p.Ay,{item:!0,xs:12,sm:4},m.createElement(g.OO,{label:"Номер телефона",value:this.state.number,func:function(e){t.setState({number:e.target.value})}})),m.createElement(p.Ay,{item:!0,xs:12,sm:4},m.createElement(g.OO,{label:"Пароль",type:"password",value:this.state.pass,func:function(e){t.setState({pass:e.target.value})}})),m.createElement(p.Ay,{item:!0,xs:12,sm:4},m.createElement(f.A,{variant:"contained",style:{width:"100%"},onClick:this.login.bind(this)},"Войти")))))}}]);var n}(m.Component)}}]);
//# sourceMappingURL=591.29c2d340351e64ab6cb4.js.map