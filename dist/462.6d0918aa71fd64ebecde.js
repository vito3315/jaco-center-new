"use strict";(self.webpackChunkreact_ssr=self.webpackChunkreact_ssr||[]).push([[462],{3198:(e,t,n)=>{n.d(t,{A:()=>A});var r=n(8168),i=n(8587),o=n(6540),l=n(4164),a=n(5659),c=n(5669),s=n(1848),h=n(8413),u=n(1609);function m(e){return(0,u.Ay)("MuiTableContainer",e)}(0,h.A)("MuiTableContainer",["root"]);var d=n(4848);const f=["className","component"],p=(0,s.Ay)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),A=o.forwardRef((function(e,t){const n=(0,c.b)({props:e,name:"MuiTableContainer"}),{className:o,component:s="div"}=n,h=(0,i.A)(n,f),u=(0,r.A)({},n,{component:s}),A=(e=>{const{classes:t}=e;return(0,a.A)({root:["root"]},m,t)})(u);return(0,d.jsx)(p,(0,r.A)({ref:t,as:s,className:(0,l.A)(A.root,o),ownerState:u},h))}))},6462:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var r=n(467),i=n(3029),o=n(2901),l=n(6822),a=n(3954),c=n(5501),s=n(4467),h=n(4756),u=n.n(h),m=n(6540),d=n(8154),f=n(8239),p=n(1224),A=n(4137),g=n(3884),y=n(4774),_=n(3198),E=n(6627),v=n(6798),w=n(7419),k=n(3357),W=n(5041),b=n(3259),C=n(9060),x=n.n(C);function D(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D=function(){return!!e})()}var I=n(6663),T=function(e){function t(e){var n,r,o,c,h,u,m,d,f;return(0,i.A)(this,t),r=this,o=t,c=[e],o=(0,a.A)(o),n=(0,l.A)(r,D()?Reflect.construct(o,c||[],(0,a.A)(r).constructor):o.apply(r,c)),(0,s.A)(n,"interval",null),(0,s.A)(n,"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.setState({spiner:!0}),t.type=e,t.token=b.A.getToken(),fetch(x().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:I.stringify(t)}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){n.setState({spiner:!1})}),300),e;window.location.pathname="/auth"}else window.location.pathname="/"})).catch((function(e){console.log(e),n.setState({spiner:!1})}))})),n.state={classes:n.props.classes,cityList:[],spiner:!1,data:[],selectedPoint:"",selectedDate:(h=new Date,u=new Date(h),m=""+(u.getMonth()+1),d=""+u.getDate(),f=u.getFullYear(),m.length<2&&(m="0"+m),d.length<2&&(d="0"+d),[f,m,d].join("-")),points:[],point:null,activeCat:0,orders:[],orderCheck:!1,showOrder:null,openDialog:!1,delOrder:!1,radiogroup_options:[{id:"0",label:"Решили отредактировать заказ",value:0},{id:"1",label:"Не устраивает время ожидания",value:0},{id:"2",label:"Изминились планы",value:0},{id:"3",label:"Недостаточно средств",value:0},{id:"4",label:"Другое",value:0}],textDel:"",typeDel:-1},n}return(0,c.A)(t,e),(0,o.A)(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"checkLogin",value:(C=(0,r.A)(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={token:b.A.getToken()},e.next=3,this.getData("check_login_center",t);case 3:!0===e.sent||(localStorage.removeItem("token"),clearInterval(this.interval),setTimeout((function(){window.location.href="/auth"}),500));case 5:case"end":return e.stop()}}),e,this)}))),function(){return C.apply(this,arguments)})},{key:"componentDidMount",value:(h=(0,r.A)(u().mark((function e(){var t,n,r=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(window.location.href="https://jacocallcenter.ru"+window.location.pathname),document.title="Заказы на кухне",b.A.setPage("ordercook"),this.interval=setInterval((function(){return r.checkLogin()}),36e5),this.checkLogin(),t={city_id:1},e.next=8,this.getData("get_points_center",t);case 8:n=e.sent,console.log(n),this.setState({points:n,selectedPoint:n[0].id}),setTimeout((function(){r.getCookOrders()}),500);case 12:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"changePoint",value:function(e){var t=this,n=e.target.value;this.setState({selectedPoint:n}),setTimeout((function(){t.getCookOrders()}),500)}},{key:"getCookOrders",value:(n=(0,r.A)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.selectedPoint},e.next=3,this.getData("getCookOrders",t);case 3:n=e.sent,this.setState({data:n});case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"render",value:function(){return m.createElement(f.Ay,{container:!0,spacing:3},m.createElement(d.m,null,m.createElement("title",null,"Заказы на кухне")),m.createElement(w.A,{open:this.state.spiner,style:{zIndex:99,color:"#fff"}},m.createElement(k.A,{color:"inherit"})),m.createElement(f.Ay,{item:!0,xs:3},m.createElement(W.DI,{classes:this.state.classes,data:this.state.points,value:this.state.selectedPoint,func:this.changePoint.bind(this),label:"Точка"})),m.createElement(f.Ay,{item:!0,xs:3},m.createElement(p.A,{variant:"contained",onClick:this.getCookOrders.bind(this)},"Обновить")),m.createElement(f.Ay,{item:!0,xs:12},m.createElement(_.A,null,m.createElement(A.A,null,m.createElement(E.A,null,m.createElement(v.A,null,m.createElement(y.A,null,"#"),m.createElement(y.A,null,"Тип"),m.createElement(y.A,null,"Статус"),m.createElement(y.A,null,"Время заказа / предзаказа"),m.createElement(y.A,null,"Время выхода на стол"),m.createElement(y.A,null,"Во сколько собрали"),m.createElement(y.A,null,"Закрыли"),m.createElement(y.A,null,"Приготовили"),m.createElement(y.A,null,"Отдали"),m.createElement(y.A,null,"Обещали"))),m.createElement(g.A,null,this.state.data.ready?this.state.data.ready.map((function(e,t){return m.createElement(v.A,{key:t,style:{backgroundColor:"green",color:"#fff",fontWeight:"700"}},m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.id),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.type_order),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.status),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},1==parseInt(e.preorder)?e.date_time_preorder_:e.date_time_order),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.unix_start_stol_or),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.give_data_time_),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.close_date_time_order),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.time_),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.test_time),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},0==parseInt(e.preorder)?e.unix_time_to_client:""))})):null,this.state.data.onstol?this.state.data.onstol.map((function(e,t){return m.createElement(v.A,{key:t,style:{backgroundColor:"yellow",color:"#000",fontWeight:"700"}},m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.id),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.type_order),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.status),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},1==parseInt(e.preorder)?e.date_time_preorder_:e.date_time_order),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.unix_start_stol_or),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.give_data_time_),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.close_date_time_order),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.time_),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.test_time),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},0==parseInt(e.preorder)?e.unix_time_to_client:""))})):null,this.state.data.prestol_new?this.state.data.prestol_new.map((function(e,t){return m.createElement(v.A,{key:t,style:{backgroundColor:"#fff",color:"#000",fontWeight:"500"}},m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.id),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.type_order),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.status),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},1==parseInt(e.preorder)?e.date_time_preorder:e.date_time_order),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.time_start_order),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.give_data_time_),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.close_date_time_order),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.time_),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},e.test_time),m.createElement(y.A,{style:{color:"inherit",fontWeight:"inherit"}},0==parseInt(e.preorder)?e.unix_time_to_client:""))})):null)))))}}]);var n,h,C}(m.Component)}}]);
//# sourceMappingURL=462.6d0918aa71fd64ebecde.js.map