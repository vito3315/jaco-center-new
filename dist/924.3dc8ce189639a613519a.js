"use strict";(self.webpackChunkreact_ssr=self.webpackChunkreact_ssr||[]).push([[924],{3198:(e,t,n)=>{n.d(t,{A:()=>E});var r=n(8168),o=n(8587),l=n(6540),a=n(4164),c=n(5659),i=n(5669),s=n(1848),u=n(8413),m=n(1609);function h(e){return(0,m.Ay)("MuiTableContainer",e)}(0,u.A)("MuiTableContainer",["root"]);var p=n(4848);const A=["className","component"],f=(0,s.Ay)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),E=l.forwardRef((function(e,t){const n=(0,i.b)({props:e,name:"MuiTableContainer"}),{className:l,component:s="div"}=n,u=(0,o.A)(n,A),m=(0,r.A)({},n,{component:s}),E=(e=>{const{classes:t}=e;return(0,c.A)({root:["root"]},h,t)})(m);return(0,p.jsx)(f,(0,r.A)({ref:t,as:s,className:(0,a.A)(E.root,l),ownerState:m},u))}))},8924:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var r=n(467),o=n(3029),l=n(2901),a=n(6822),c=n(3954),i=n(5501),s=n(4467),u=n(4756),m=n.n(u),h=n(6540),p=n(8154),A=n(8239),f=n(1224),E=n(4137),v=n(3884),y=n(4774),d=n(3198),w=n(6627),k=n(6798),g=n(7419),b=n(3357),_=n(5041),x=n(3259),T=n(9060),C=n.n(T);function S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S=function(){return!!e})()}var L=n(6663),I=function(e){function t(e){var n,r,l,i;return(0,o.A)(this,t),r=this,l=t,i=[e],l=(0,c.A)(l),n=(0,a.A)(r,S()?Reflect.construct(l,i||[],(0,c.A)(r).constructor):l.apply(r,i)),(0,s.A)(n,"interval",null),(0,s.A)(n,"getData",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.setState({spiner:!0}),t.type=e,t.token=x.A.getToken(),fetch(C().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:L.stringify(t)}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){n.setState({spiner:!1})}),300),e;window.location.pathname="/auth"}else window.location.pathname="/"})).catch((function(e){console.log(e),n.setState({spiner:!1})}))})),(0,s.A)(n,"componentDidMount",(function(){x.A.setPage("checkuserpromo"),n.interval=setInterval((function(){return n.checkLogin()}),36e5),n.checkLogin(),document.title="Проверка промокода клиента","http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(window.location.href="https://jacocallcenter.ru"+window.location.pathname)})),n.state={cityList:[],spiner:!1,number:"",promos:[],promos_sms:[]},n}return(0,i.A)(t,e),(0,l.A)(t,[{key:"checkLogin",value:(u=(0,r.A)(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={token:x.A.getToken()},e.next=3,this.getData("check_login_center",t);case 3:!0===e.sent||(localStorage.removeItem("token"),clearInterval(this.interval),setTimeout((function(){window.location.href="/auth"}),500));case 5:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"changeNumber",value:function(e){this.setState({number:e.target.value})}},{key:"getPromoList",value:(n=(0,r.A)(m().mark((function e(){var t,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={number:this.state.number},e.next=3,this.getData("check_user_promo_new",t);case 3:n=e.sent,this.setState({promos:n.promo_lk,promos_sms:n.promo_sms});case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"render",value:function(){return h.createElement(A.Ay,{container:!0,spacing:3},h.createElement(p.m,null,h.createElement("title",null,"Проверка промокода клиента")),h.createElement(g.A,{open:this.state.spiner,style:{zIndex:99,color:"#fff"}},h.createElement(b.A,{color:"inherit"})),h.createElement(A.Ay,{item:!0,xs:3},h.createElement(_.OO,{value:this.state.number,func:this.changeNumber.bind(this),label:"Номер телефона"})),h.createElement(A.Ay,{item:!0,xs:3},h.createElement(f.A,{variant:"contained",onClick:this.getPromoList.bind(this)},"Обновить")),h.createElement(A.Ay,{item:!0,xs:12},h.createElement("span",null,"Промокоды из ЛК"),h.createElement(d.A,null,h.createElement(E.A,null,h.createElement(w.A,null,h.createElement(k.A,null,h.createElement(y.A,null,"Телефон"),h.createElement(y.A,null,"Имя"),h.createElement(y.A,null,"День рождения"),h.createElement(y.A,null,"Промокод"),h.createElement(y.A,null,"Описание"))),h.createElement(v.A,null,this.state.promos.map((function(e,t){return h.createElement(k.A,{key:t},h.createElement(y.A,{style:{color:"inherit"}},e.login),h.createElement(y.A,{style:{color:"inherit"}},e.user_name),h.createElement(y.A,{style:{color:"inherit"}},e.date_bir),h.createElement(y.A,{style:{color:"inherit"}},e.promo_name),h.createElement(y.A,{style:{color:"inherit"}},e.coment))})))))),h.createElement(A.Ay,{item:!0,xs:12},h.createElement("span",null,"Отправленные в смс промокоды"),h.createElement(d.A,null,h.createElement(E.A,null,h.createElement(w.A,null,h.createElement(k.A,null,h.createElement(y.A,null,"Телефон"),h.createElement(y.A,null,"Сообщение"),h.createElement(y.A,null,"Дата время"))),h.createElement(v.A,null,this.state.promos_sms.map((function(e,t){return h.createElement(k.A,{key:t},h.createElement(y.A,{style:{color:"inherit"}},e.phone),h.createElement(y.A,{style:{color:"inherit"}},e.text),h.createElement(y.A,{style:{color:"inherit"}},e.date_time))})))))))}}]);var n,u}(h.Component)}}]);
//# sourceMappingURL=924.3dc8ce189639a613519a.js.map