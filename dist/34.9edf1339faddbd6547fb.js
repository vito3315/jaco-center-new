"use strict";(self.webpackChunkreact_ssr=self.webpackChunkreact_ssr||[]).push([[34],{7896:(e,t,n)=>{n.d(t,{Z:()=>Z});var r=n(7462),i=n(3366),o=n(7294),l=n(6010),a=n(4780),c=n(1657),s=n(948),h=n(1588),u=n(4867);function m(e){return(0,u.Z)("MuiTableContainer",e)}(0,h.Z)("MuiTableContainer",["root"]);var d=n(5893);const f=["className","component"],p=(0,s.ZP)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),Z=o.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiTableContainer"}),{className:o,component:s="div"}=n,h=(0,i.Z)(n,f),u=(0,r.Z)({},n,{component:s}),Z=(e=>{const{classes:t}=e;return(0,a.Z)({root:["root"]},m,t)})(u);return(0,d.jsx)(p,(0,r.Z)({ref:t,as:s,className:(0,l.Z)(Z.root,o),ownerState:u},h))}))},1034:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var r=n(5861),i=n(5671),o=n(3144),l=n(7326),a=n(136),c=n(2963),s=n(1120),h=n(4942),u=n(4687),m=n.n(u),d=n(7294),f=n(4593),p=n(5725),Z=n(2642),g=n(9573),_=n(8732),y=n(6926),E=n(7896),v=n(6011),w=n(3694),k=n(4567),W=n(9062),x=n(8607),C=n(6251),b=n(8811),P=n.n(b);var D=n(7563),T=function(e){(0,a.Z)(S,e);var t,n,u,b,T,I=(b=S,T=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=(0,s.Z)(b);if(T){var n=(0,s.Z)(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return(0,c.Z)(this,e)});function S(e){var t,n,r,o,a,c;return(0,i.Z)(this,S),t=I.call(this,e),(0,h.Z)((0,l.Z)(t),"interval",null),(0,h.Z)((0,l.Z)(t),"getData",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.setState({spiner:!0}),n.type=e,n.token=C.Z.getToken(),fetch(P().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:D.stringify(n)}).then((function(e){return e.json()})).then((function(e){if(!1!==e.st||"redir"!=e.type){if(!1!==e.st||"auth"!=e.type)return setTimeout((function(){t.setState({spiner:!1})}),300),e;window.location.pathname="/auth"}else window.location.pathname="/"})).catch((function(e){console.log(e),t.setState({spiner:!1})}))})),t.state={classes:t.props.classes,cityList:[],spiner:!1,data:[],selectedPoint:"",selectedDate:(n=new Date,r=new Date(n),o=""+(r.getMonth()+1),a=""+r.getDate(),c=r.getFullYear(),o.length<2&&(o="0"+o),a.length<2&&(a="0"+a),[c,o,a].join("-")),points:[],point:null,activeCat:0,orders:[],orderCheck:!1,showOrder:null,openDialog:!1,delOrder:!1,radiogroup_options:[{id:"0",label:"Решили отредактировать заказ",value:0},{id:"1",label:"Не устраивает время ожидания",value:0},{id:"2",label:"Изминились планы",value:0},{id:"3",label:"Недостаточно средств",value:0},{id:"4",label:"Другое",value:0}],textDel:"",typeDel:-1},t}return(0,o.Z)(S,[{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"checkLogin",value:(u=(0,r.Z)(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={token:C.Z.getToken()},e.next=3,this.getData("check_login_center",t);case 3:!0===e.sent||(localStorage.removeItem("token"),clearInterval(this.interval),setTimeout((function(){window.location.href="/auth"}),500));case 5:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"componentDidMount",value:(n=(0,r.Z)(m().mark((function e(){var t,n,r=this;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"http:"!=window.location.protocol&&"http"!=window.location.protocol||"localhost"==window.location.hostname||(window.location.href="https://jacocallcenter.ru"+window.location.pathname),document.title="Заказы на кухне",C.Z.setPage("ordercook"),this.interval=setInterval((function(){return r.checkLogin()}),36e5),this.checkLogin(),t={city_id:1},e.next=8,this.getData("get_points_center",t);case 8:n=e.sent,console.log(n),this.setState({points:n,selectedPoint:n[0].id}),setTimeout((function(){r.getCookOrders()}),500);case 12:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"changePoint",value:function(e){var t=this,n=e.target.value;this.setState({selectedPoint:n}),setTimeout((function(){t.getCookOrders()}),500)}},{key:"getCookOrders",value:(t=(0,r.Z)(m().mark((function e(){var t,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={point_id:this.state.selectedPoint},e.next=3,this.getData("getCookOrders",t);case 3:n=e.sent,this.setState({data:n});case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return d.createElement(p.ZP,{container:!0,spacing:3},d.createElement(f.q,null,d.createElement("title",null,"Заказы на кухне")),d.createElement(k.Z,{open:this.state.spiner,style:{zIndex:99,color:"#fff"}},d.createElement(W.Z,{color:"inherit"})),d.createElement(p.ZP,{item:!0,xs:3},d.createElement(x.$S,{classes:this.state.classes,data:this.state.points,value:this.state.selectedPoint,func:this.changePoint.bind(this),label:"Точка"})),d.createElement(p.ZP,{item:!0,xs:3},d.createElement(Z.Z,{variant:"contained",onClick:this.getCookOrders.bind(this)},"Обновить")),d.createElement(p.ZP,{item:!0,xs:12},d.createElement(E.Z,null,d.createElement(g.Z,null,d.createElement(v.Z,null,d.createElement(w.Z,null,d.createElement(y.Z,null,"#"),d.createElement(y.Z,null,"Тип"),d.createElement(y.Z,null,"Статус"),d.createElement(y.Z,null,"Время заказа / предзаказа"),d.createElement(y.Z,null,"Время выхода на стол"),d.createElement(y.Z,null,"Во сколько собрали"),d.createElement(y.Z,null,"Закрыли"),d.createElement(y.Z,null,"Приготовили"),d.createElement(y.Z,null,"Отдали"),d.createElement(y.Z,null,"Обещали"))),d.createElement(_.Z,null,this.state.data.ready?this.state.data.ready.map((function(e,t){return d.createElement(w.Z,{key:t,style:{backgroundColor:"green",color:"#fff",fontWeight:"700"}},d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.id),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.type_order),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.status),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},1==parseInt(e.preorder)?e.date_time_preorder_:e.date_time_order),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.unix_start_stol_or),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.give_data_time_),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.close_date_time_order),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.time_),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.test_time),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},0==parseInt(e.preorder)?e.unix_time_to_client:""))})):null,this.state.data.onstol?this.state.data.onstol.map((function(e,t){return d.createElement(w.Z,{key:t,style:{backgroundColor:"yellow",color:"#000",fontWeight:"700"}},d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.id),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.type_order),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.status),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},1==parseInt(e.preorder)?e.date_time_preorder_:e.date_time_order),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.unix_start_stol_or),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.give_data_time_),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.close_date_time_order),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.time_),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.test_time),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},0==parseInt(e.preorder)?e.unix_time_to_client:""))})):null,this.state.data.prestol_new?this.state.data.prestol_new.map((function(e,t){return d.createElement(w.Z,{key:t,style:{backgroundColor:"#fff",color:"#000",fontWeight:"500"}},d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.id),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.type_order),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.status),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},1==parseInt(e.preorder)?e.date_time_preorder:e.date_time_order),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.time_start_order),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.give_data_time_),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.close_date_time_order),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.time_),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},e.test_time),d.createElement(y.Z,{style:{color:"inherit",fontWeight:"inherit"}},0==parseInt(e.preorder)?e.unix_time_to_client:""))})):null)))))}}]),S}(d.Component)}}]);
//# sourceMappingURL=34.9edf1339faddbd6547fb.js.map