{"version":3,"file":"591.29c2d340351e64ab6cb4.js","mappings":"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","sources":["webpack://react-ssr/./src/components/auth/auth.component.jsx"],"sourcesContent":["import React from 'react';\n\nimport Grid from '@mui/material/Grid';\nimport Button from '@mui/material/Button';\n\nconst queryString = require('query-string');\n\nimport itemsStore from '../../stores/items-store';\nimport config from '../../stores/config';\n\nimport { MyTextInput } from '../../stores/elements';\n\nexport class Auth extends React.Component {\n  constructor(props) {\n    super(props);\n    \n    this.state = {    \n      number: '',\n      pass: ''\n    };\n  }\n    \n  componentDidMount = () => {\n    document.title = \"Авторизация\";\n    itemsStore.setPage('auth');\n\n    if((window.location.protocol == 'http:' || window.location.protocol == 'http') && window.location.hostname != 'localhost'){\n      window.location.href = 'https://jacocallcenter.ru'+window.location.pathname;\n    }\n  }\n    \n  getData = (method, data = {}) => {\n    \n    this.setState({\n      spiner: true\n    })\n    \n    data.type = method;\n    data.token = itemsStore.getToken();\n\n    return fetch(config.urlApi, {\n      method: 'POST',\n      headers: {\n        'Content-Type':'application/x-www-form-urlencoded'},\n      body: queryString.stringify( data ) \n    }).then(res => res.json()).then(json => {\n      \n      if( json.st === false && json.type == 'redir' ){\n        window.location.pathname = '/';\n        return;\n      }\n      \n      if( json.st === false && json.type == 'auth' ){\n        window.location.pathname = '/auth';\n        return;\n      }\n      \n      setTimeout( () => {\n        this.setState({\n          spiner: false\n        })\n      }, 300 )\n      \n      return json;\n    })\n    .catch(err => { \n      console.log( err )\n      this.setState({\n        spiner: false\n      })\n    });\n  }\n\n  async login(){\n    let data = {\n      number: this.state.number,\n      pass: this.state.pass\n    }\n\n    let res = await this.getData('login_center', data);\n\n    if( res['st'] ){\n      itemsStore.setToken(res.token, res.name);\n     \n      setTimeout( () => {\n        window.location.href = '/';\n      }, 500 )\n      \n    }else{\n      alert(res.text)\n    }\n\n    /*fetch(config.urlApi, {\n      method: 'POST',\n      headers: {\n        'Content-Type':'application/x-www-form-urlencoded'},\n      body: queryString.stringify({\n        type: 'login_center', \n        number: this.state.number,\n        pass: this.state.pass\n      })\n    }).then(res => res.json()).then(json => {\n      if( json['st'] ){\n        itemsStore.setToken(json.token, json.name);\n       \n        setTimeout( () => {\n          window.location.href = '/';\n        }, 500 )\n        \n      }else{\n        alert(json.text)\n      }\n    });*/\n  }\n  \n  handleKeyPress(target) {\n    if(target.charCode==13){\n      if( this.state.number.length > 0 && this.state.pass.length > 0 ){\n        this.login();\n      }\n    }\n  }\n  \n  render() {\n    return (\n      <Grid container spacing={3} justifyContent=\"center\">\n        <Grid item xs={12} sm={4}>\n          <Grid container direction=\"column\" spacing={2}>\n          \n            <Grid item xs={12} sm={4}>\n              <img alt=\"Жако доставка роллов и пиццы\" src=\"../assets/logo.png\" style={{ height: 'max-content', width: '100%' }} />\n            </Grid>\n                \n            <Grid item xs={12} sm={4}>\n              <MyTextInput label={'Номер телефона'} value={this.state.number} func={ (event) => { this.setState({ number: event.target.value }) } } />\n            </Grid>\n            <Grid item xs={12} sm={4}>\n              <MyTextInput label={'Пароль'} type={'password'} value={this.state.pass} func={ (event) => { this.setState({ pass: event.target.value }) } } />\n            </Grid>\n\n            <Grid item xs={12} sm={4}>\n              <Button variant=\"contained\" style={{ width: '100%' }} onClick={this.login.bind(this)}>Войти</Button>\n            </Grid>\n\n          </Grid>\n        </Grid>\n        \n\n      </Grid>\n    )\n  }\n}"],"names":["queryString","require","Auth","_React$Component","props","_this","_classCallCheck","_defineProperty","document","title","itemsStore","setPage","window","location","protocol","hostname","href","pathname","method","data","arguments","length","undefined","setState","spiner","type","token","getToken","fetch","config","headers","body","stringify","then","res","json","st","setTimeout","err","console","log","state","number","pass","_inherits","_createClass","key","value","_login","_asyncToGenerator","_regeneratorRuntime","_callee","_context","prev","next","this","getData","sent","setToken","name","alert","text","stop","apply","target","charCode","login","_this2","React","Grid","container","spacing","justifyContent","item","xs","sm","direction","alt","src","style","height","width","MyTextInput","label","func","event","Button","variant","onClick","bind"],"sourceRoot":""}