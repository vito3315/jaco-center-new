"use strict";(self.webpackChunkreact_ssr=self.webpackChunkreact_ssr||[]).push([[433],{8433:(t,e,n)=>{n.r(e),n.d(e,{default:()=>k});var r=n(5861),a=n(5671),s=n(3144),i=n(7326),c=n(136),o=n(6215),u=n(1120),l=n(4942),f=n(4687),h=n.n(f),m=n(7294),p=n(5725),d=n(2642),Z=n(4998),g=n(8811),y=n.n(g),v=n(5350);var w=n(7563),k=function(t){(0,c.Z)(k,t);var e,n,f,g=(n=k,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,u.Z)(n);if(f){var r=(0,u.Z)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,o.Z)(this,t)});function k(t){var e;return(0,a.Z)(this,k),e=g.call(this,t),(0,l.Z)((0,i.Z)(e),"componentDidMount",(function(){document.title="Авторизация",Z.Z.setPage("auth")})),(0,l.Z)((0,i.Z)(e),"getData",(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.setState({spiner:!0}),n.type=t,n.token=Z.Z.getToken(),fetch(y().urlApi,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:w.stringify(n)}).then((function(t){return t.json()})).then((function(t){if(!1!==t.st||"redir"!=t.type){if(!1!==t.st||"auth"!=t.type)return setTimeout((function(){e.setState({spiner:!1})}),300),t;window.location.pathname="/auth"}else window.location.pathname="/"})).catch((function(t){console.log(t),e.setState({spiner:!1})}))})),e.state={number:"",pass:""},e}return(0,s.Z)(k,[{key:"login",value:(e=(0,r.Z)(h().mark((function t(){var e,n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={number:this.state.number,pass:this.state.pass},t.next=3,this.getData("login_center",e);case 3:(n=t.sent).st?(Z.Z.setToken(n.token,n.name),setTimeout((function(){window.location.href="/"}),500)):alert(n.text);case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"handleKeyPress",value:function(t){13==t.charCode&&this.state.number.length>0&&this.state.pass.length>0&&this.login()}},{key:"render",value:function(){var t=this;return m.createElement(p.ZP,{container:!0,spacing:3,justifyContent:"center"},m.createElement(p.ZP,{item:!0,xs:12,sm:4},m.createElement(p.ZP,{container:!0,direction:"column",spacing:2},m.createElement(p.ZP,{item:!0,xs:12,sm:4},m.createElement("img",{alt:"Жако доставка роллов и пиццы",src:"../assets/logo.png",style:{height:"max-content",width:"100%"}})),m.createElement(p.ZP,{item:!0,xs:12,sm:4},m.createElement(v.rZ,{label:"Номер телефона",value:this.state.number,func:function(e){t.setState({number:e.target.value})}})),m.createElement(p.ZP,{item:!0,xs:12,sm:4},m.createElement(v.rZ,{label:"Пароль",type:"password",value:this.state.pass,func:function(e){t.setState({pass:e.target.value})}})),m.createElement(p.ZP,{item:!0,xs:12,sm:4},m.createElement(d.Z,{variant:"contained",style:{width:"100%"},onClick:this.login.bind(this)},"Войти")))))}}]),k}(m.Component)}}]);
//# sourceMappingURL=433.85c3a8e47a66f4006131.js.map